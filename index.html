<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SIMLITABMAS</title>
    <link rel="icon" href="{{ asset('asset/logo2.png') }}" type="image/icon type">
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>


    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
      }
      header {
        background-color: green;
        color: white;
        padding: 1rem 0;
        text-align: center;
      }
      main {
        /* padding-top: 20px;
        padding-left: 80px;
        padding-right: 80px;
        padding-bottom: 20px; 
        max-width: 1450px;*/
        margin: 0 auto;
        background-color: white;
        box-shadow: 0 0 10px rgba(201, 133, 133, 0.1);
      }
      h1 {
        font-size: 2rem;
        margin-bottom: 1rem;
      }
      
      .info-time, .info-title, .info-value {
          margin-bottom: 5px;
        }

      .info-box {
        border: 1px solid #000;
        padding: 10px;
        text-align: center;
        border-radius: 5px;
        position: relative;
        height: 200px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin-bottom: 20px;
        text-align: center;
        background-color: #f9f9f9;
      }
      .info-title {
        font-size: 32px;
        font-weight: bold;
        margin-top: 10px;
      }
      .info-value {
        font-size: 48px;
        font-weight: bold;
        margin-top: 10px;
      }
      .info-title1 {
        font-size: 32px;
        font-weight: bold;
        margin-top: 10px;
      }
      .info-value1 {
        font-size: 24px;
        font-weight: bold;
        margin-top: 10px;
      }
      .info-time {
        font-size: 10px;
        text-align: right;
        font-weight: bold;
        position: absolute;
        top: 10px;
        right: 10px;
      }

      .info-time-left {
        text-align: left;
        top: 10px;
        left: 10px;
      }

      .large-box {
        min-height: 200px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .d-flex {
        display: flex !important;
      }
      .flex-wrap {
        flex-wrap: wrap !important;
      }
      .offset-md-2 {
        margin-left: 16.66667%;
      }

      .content p{
        margin-left: 20px;
        margin-right: 20px;
      }
      .content h2{
        margin-left: 20px;
        margin-right: 20px;
      }

      .gap-1 {
        gap: 0.5rem; /* Nilai gap-1 pada Bootstrap 5 */
      }

      /* Alternatif jika Bootstrap tidak mendukung gap */
      .custom-gap {
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
      }

      .chart-container {
        height: 50vh;
      }
      .chart {
        margin: 5px;
        padding: 10px;
        border-radius: 24px;
        background-color: #4caf50;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* Optional: Add a slight shadow for better look */
      }
      h2 {
        margin-top: 10px;
        text-align: center;
        font-weight: bold;
        color: rgb(0, 0, 0);
      }
      #section2 .container {
          padding: 10px;
        }
        .chart-container {
          width: 100%;
          height: 200px; /* Adjust as needed */
        }
        canvas {
          width: 100% !important; /* Make canvas responsive */
          height: 100% !important; /* Make canvas responsive */
        }
        .text-center {
          text-align: center;
        }
        .mb-4 {
          margin-bottom: 1.5rem !important;
        }

        .chart-containerr {
        
        border: 1px solid #000000; 
        border-radius: 5px; 
        background-color: #ffffff;
      }
        canvas {
        width: 100% !important;
        height: auto !important;
      }
        .text-centerr {
        text-align: center;
      }
      .footer {
          background-color: #000000;
          padding: 20px 0;
          text-align: center;
          /* border-top: 1px solid #e7e7e7; */
          margin-top: 50px;
      }
      .footer .container {
          display: flex;
          justify-content: space-between;
          align-items: center;
      }
      .footer p {
          margin: 0;
          color: #f4f4f4;
          text-align: center;
      }
      .footer a {
          color: #007bff;
          text-decoration: none;
      }
      .footer a:hover {
          text-decoration: underline;
      }
    </style>

  </head>
  <body>
    <header>
      <h1>SIMLITABMAS</h1>
    </header>
    <main>
      <section class="content">
        <h2 style="text-align: center">Pemodelan Tingkat Konsumsi Energi dan Emisi Karbon pada Bangunan Perkotaan Berbasis Pendekatan Teoritis dan Machine Learning</h2>
        <p style="text-align: justify">
          Penelitian ini bertujuan untuk memodelkan tingkat konsumsi energi dan emisi karbon pada bangunan perkotaan dengan menggunakan pendekatan teoritis dan machine learning. Model ini akan membantu dalam menentukan besarnya beban
          thermal sebuah bangunan serta kebutuhan energi listrik untuk air conditioning yang sebanding dengan beban thermal tersebut.
        </p>
      </section>

      <!-- Section 1 -->
      <div class="container">
        <div class="row">

          <div class="col-md-10 col-12">
                <div class="info-box large-box" style="background-color: #4CAF50; color: white;">
                    <div class="info-time info-time-left" id="time1">Nama Ruangan</div>
                    <div class="info-title">Suhu Optimal</div>
                    <div class="info-value" id="suhu">C</div>
                </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time2">Tanggal / Jam</div>
              <div class="info-title">Sensor 1</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time3">Tanggal / Jam</div>
              <div class="info-title">Sensor 2</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time4">Tanggal / Jam</div>
              <div class="info-title">Sensor 3</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time5">Tanggal / Jam</div>
              <div class="info-title">Sensor 4</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time6">Tanggal / Jam</div>
              <div class="info-title">Sensor 5</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time7">Tanggal / Jam</div>
              <div class="info-title">Sensor 6</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
          <div class="col-md-2 col-12 mb-4">
            <div class="info-box">
              <div class="info-time" id="time8">Tanggal / Jam</div>
              <div class="info-title">Sensor 7</div>
              <div class="info-value" id="suhu">C</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Section 2 -->
      <section id="section2" style="background-color: #4CAF50;">
        <div class="container">
          <h2 class="text-centerr" style="color: #ffffff; margin-top: 50px; margin-bottom: 50px;">HISTORI DATA</h2>
          <!-- section 2, row 1 -->

           <!-- Filter Period -->
            <div class="row">
                <div class="filter-period text-center col-md-6 col-sm-4 mb-4">
                    <label for="startDate"> <b>Start Date:</b></label>
                    <input type="date" id="startDate">
                    <label for="endDate"> <b>End Date:</b></label>
                    <input type="date" id="endDate">
                    <button id="filterBtn" class="btn btn-danger"> <b>Filter</b></button>
                </div>
                <div class="text-center col-md-6 col-sm-4 mb-4" style="justify-content: right;">
                    <button id="printBtn" class="btn btn-warning">Print</button>
                    <button id="exportExcelBtn" class="btn btn-primary">Export to Excel</button>
                </div>

            </div>

            <div class="row">
                <div class="col-md-6 col-sm-6 mb-4">
                    <div class="chart-containerr">
                        <canvas id="suhuOptimal"></canvas>
                    </div>
                </div>
                <div class="col-md-6 col-sm-6 mb-4">
                    <div class="chart-containerr">
                        <canvas id="lineChart1"></canvas>
                    </div>
                </div>
            </div>

          <!-- section 2, row 2 -->
          <div class="row">
            <div class="col-md-6 col-sm-4 mb-4">
                <div class="chart-containerr">
                  <canvas id="lineChart2"></canvas>
                </div>
              </div>
              <div class="col-md-6 col-sm-4 mb-4">
                <div class="chart-containerr">
                  <canvas id="lineChart3"></canvas>
                </div>
              </div>
            </div>

            <div class="row">
                <div class="col-md-6 col-sm-4 mb-4">
                    <div class="chart-containerr">
                        <canvas id="lineChart4"></canvas>
                    </div>
                </div>
                <div class="col-md-6 col-sm-4 mb-4">
                    <div class="chart-containerr">
                    <canvas id="lineChart5"></canvas>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 col-sm-4 mb-4">
                    <div class="chart-containerr">
                    <canvas id="lineChart6"></canvas>
                    </div>
                </div>
                <div class="col-md-6 col-sm-4 mb-4">
                    <div class="chart-containerr">
                    <canvas id="lineChart7"></canvas>
                    </div>
                </div>
            </div>
        </div>
      </section>

    </main>

    <script>
      // Function to fetch data from ThingSpeak
      async function fetchData() {
        try {
          const response = await fetch('https://api.thingspeak.com/channels/2588909/feeds.json?results=2');
          const data = await response.json();
          return data.feeds[0];
        } catch (error) {
          console.error('Error fetching data:', error);
          return null;
        }
      }

      // Function to update the page with ThingSpeak data
      async function updatePage() {
        const data = await fetchData();
        if (data) {
          const contentDiv = document.getElementById('thingspeak-content');
          contentDiv.innerHTML = `
                    <p><strong>Suhu Optimal:</strong> ${data.field1} &deg;C</p>
                    <p><strong>Sensor 1</strong> ${data.field2} %</p>
                    <p><strong>Sensor 2</strong> ${data.field3} &deg;C</p>
                    <p><strong>Sensor 3</strong> ${data.field4} %</p>
                    <p><strong>Sensor 4</strong> ${data.field5} &deg;C</p>
                    <p><strong>Sensor 5</strong> ${data.field6} %</p>
                    <p><strong>Sensor 6</strong> ${data.field7} &deg;C</p>
                    <p><strong>Sensor 7</strong> ${data.field7} &deg;C</p>
                    <p><strong>Tanggal:</strong> ${new Date(data.created_at).toLocaleString()}</p>
                `;
        }
      }

      // Update the page when it loads
      window.onload = updatePage;
    </script>

    <footer class="footer" style="background-color: black;">
      <div class="container">
          <p style="text-align: center; text-color: white">&copy; 2024 SIMLITABMAS. All rights reserved.</p>
      </div>
    </footer>

    <script src="scripts.js"></script>
  </body>
  
</html>
